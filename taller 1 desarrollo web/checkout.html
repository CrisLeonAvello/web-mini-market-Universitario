<div class="container py-4">
  <h2 class="mb-4">Checkout</h2>

  <h3>Productos en tu carrito</h3>
  <div id="checkoutProductos"></div>
  <p id="checkoutTotal">Total: $0</p>

  <form class="row g-3 mt-3">
    <div class="col-md-6">
      <label class="form-label">Nombre</label>
      <input type="text" class="form-control" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Correo</label>
      <input type="email" class="form-control" required>
    </div>
    <div class="col-12">
      <label class="form-label">Dirección</label>
      <input type="text" class="form-control" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Ciudad</label>
      <input type="text" class="form-control" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Método de envío</label>
      <select class="form-select" required>
        <option>Retiro en tienda (gratis)</option>
        <option>Envío estándar ($2.990)</option>
        <option>Envío express ($4.990)</option>
      </select>
    </div>
    <div class="col-12">
      <label class="form-label">Código de descuento (opcional)</label>
      <input type="text" class="form-control" placeholder="Ej: BIENVENIDA10">
    </div>
    <div class="col-12 text-end">
      <a href="confirmation.html" class="btn btn-success">Confirmar Compra</a>
    </div>
  </form>
</div>

<script>
async function renderCheckout() {
  const checkoutProductos = document.getElementById("checkoutProductos");
  const checkoutTotal = document.getElementById("checkoutTotal");

  const checkoutItems = JSON.parse(localStorage.getItem("checkoutItems")) || [];
  if (checkoutItems.length === 0) {
    checkoutProductos.textContent = "No hay productos en el carrito.";
    return;
  }

  const res = await fetch("data/productos.json");
  const productos = await res.json();

  let total = 0;
  checkoutItems.forEach(ci => {
    const producto = productos.find(p => p.id === ci.id);
    if (!producto) return;

    const div = document.createElement("div");
    div.textContent = `${producto.titulo} - $${producto.precio} x ${ci.qty}`;
    checkoutProductos.appendChild(div);

    total += producto.precio * ci.qty;
  });

  checkoutTotal.textContent = `Total: $${total}`;
}

renderCheckout();
</script>
